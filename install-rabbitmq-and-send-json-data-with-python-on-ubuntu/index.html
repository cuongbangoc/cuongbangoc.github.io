<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>Install RabbitMQ and Send JSON data With Python on Ubuntu</title>

  <meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1">



<link rel="apple-touch-icon" sizes="57x57" href="../assets/img/apple-touch-icon-57x57.png?v=wAAv6Wqe6l">
<link rel="apple-touch-icon" sizes="60x60" href="../assets/img/apple-touch-icon-60x60.png?v=wAAv6Wqe6l">
<link rel="apple-touch-icon" sizes="72x72" href="../assets/img/apple-touch-icon-72x72.png?v=wAAv6Wqe6l">
<link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-touch-icon-76x76.png?v=wAAv6Wqe6l">
<link rel="apple-touch-icon" sizes="114x114" href="../assets/img/apple-touch-icon-114x114.png?v=wAAv6Wqe6l">
<link rel="apple-touch-icon" sizes="120x120" href="../assets/img/apple-touch-icon-120x120.png?v=wAAv6Wqe6l">
<link rel="apple-touch-icon" sizes="144x144" href="../assets/img/apple-touch-icon-144x144.png?v=wAAv6Wqe6l">
<link rel="apple-touch-icon" sizes="152x152" href="../assets/img/apple-touch-icon-152x152.png?v=wAAv6Wqe6l">
<link rel="apple-touch-icon" sizes="180x180" href="../assets/img/apple-touch-icon-180x180.png?v=wAAv6Wqe6l">
<link rel="icon" type="image/png" href="../assets/img/favicon-32x32.png?v=wAAv6Wqe6l" sizes="32x32">
<link rel="icon" type="image/png" href="../assets/img/favicon-194x194.png?v=wAAv6Wqe6l" sizes="194x194">
<link rel="icon" type="image/png" href="../assets/img/favicon-96x96.png?v=wAAv6Wqe6l" sizes="96x96">
<link rel="icon" type="image/png" href="../assets/img/android-chrome-192x192.png?v=wAAv6Wqe6l" sizes="192x192">
<link rel="icon" type="image/png" href="../assets/img/favicon-16x16.png?v=wAAv6Wqe6l" sizes="16x16">
<link rel="manifest" href="../assets/img/manifest.json?v=wAAv6Wqe6l">
<link rel="shortcut icon" href="../assets/img/favicon.ico?v=wAAv6Wqe6l">
<meta name="msapplication-TileColor" content="#e74c3c">
<meta name="msapplication-TileImage" content="/assets/img/mstile-144x144.png?v=wAAv6Wqe6l">
<meta name="msapplication-config" content="/assets/img/browserconfig.xml?v=wAAv6Wqe6l">
<meta name="theme-color" content="#e74c3c">

  <link rel="stylesheet" type="text/css" href="../assets/css/uno.css?v=40fb1f9047" />

  <link rel="canonical" href="http://cuongbangoc.github.io/install-rabbitmq-and-send-json-data-with-python-on-ubuntu/" />
    
    <meta property="og:site_name" content="CuongBN - Just Do It" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Install RabbitMQ and Send JSON data With Python on Ubuntu" />
    <meta property="og:description" content="Introduction RabbitMQ is one of the more popular message broker solutions, offered with an open-source license (Mozilla Public License v1.1) as an implementation of Advanced Message Queuing Protocol(AMQP). Developed using the Erlang language, it is actually relatively easy..." />
    <meta property="og:url" content="http://cuongbangoc.github.io/install-rabbitmq-and-send-json-data-with-python-on-ubuntu/" />
    <meta property="og:image" content="http://res.cloudinary.com/cuongbangoc/image/upload/v1440913221/rabbit-logo_dfefmx.jpg" />
    <meta property="article:published_time" content="2015-08-05T01:01:14.000Z" />
    <meta property="article:modified_time" content="2015-08-30T12:40:23.000Z" />
    <meta property="article:tag" content="git" />
    <meta property="article:tag" content="Linux" />
    <meta property="article:tag" content="Python" />
    <meta property="article:tag" content="rabbit" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Install RabbitMQ and Send JSON data With Python on Ubuntu" />
    <meta name="twitter:description" content="Introduction RabbitMQ is one of the more popular message broker solutions, offered with an open-source license (Mozilla Public License v1.1) as an implementation of Advanced Message Queuing Protocol(AMQP). Developed using the Erlang language, it is actually relatively easy..." />
    <meta name="twitter:url" content="http://cuongbangoc.github.io/install-rabbitmq-and-send-json-data-with-python-on-ubuntu/" />
    <meta name="twitter:image:src" content="http://res.cloudinary.com/cuongbangoc/image/upload/v1440913221/rabbit-logo_dfefmx.jpg" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "CuongBN - Just Do It",
    "author": {
        "@type": "Person",
        "name": "Cuong Ba Ngoc",
        "image": "//www.gravatar.com/avatar/6d6e584a65d5852e400df206334e72b1?s=250&d=mm&r=x",
        "url": "http://cuongbangoc.github.io/author/cuongbangoc",
        "sameAs": null,
        "description": null
    },
    "headline": "Install RabbitMQ and Send JSON data With Python on Ubuntu",
    "url": "http://cuongbangoc.github.io/install-rabbitmq-and-send-json-data-with-python-on-ubuntu/",
    "datePublished": "2015-08-05T01:01:14.000Z",
    "dateModified": "2015-08-30T12:40:23.000Z",
    "image": "http://res.cloudinary.com/cuongbangoc/image/upload/v1440913221/rabbit-logo_dfefmx.jpg",
    "keywords": "git, Linux, Python, rabbit",
    "description": "Introduction RabbitMQ is one of the more popular message broker solutions, offered with an open-source license (Mozilla Public License v1.1) as an implementation of Advanced Message Queuing Protocol(AMQP). Developed using the Erlang language, it is actually relatively easy..."
}
    </script>

    <meta name="generator" content="Ghost 0.6" />
    <link rel="alternate" type="application/rss+xml" title="CuongBN - Just Do It" href="http://cuongbangoc.github.io/rss/" />
    <script>
var profile_title = 'Cuong Ba Ngoc';
var profile_resume ='Software Engineer';
</script>

</head>
<body class="post-template tag-git-2 tag-linux tag-python tag-rabbit">

  <section id="menu-button" class="expanded">
    <a><i class="icon icon-list"></i></a>
  </section>

  <aside class="cover">

  <div class="cover container">
    <div class="profile">
      <a id="avatar-link" title="link to homepage for CuongBN - Just Do It" href="http://cuongbangoc.github.io/#open">
        <img src="../content/images/2015/08/avatar.jpg" alt="CuongBN - Just Do It avatar" class="profile avatar rounded hvr-buzz-out" />
        <h1 id="profile-title">CuongBN - Just Do It</h1>
        <h3 id="profile-resume"></h3>
      </a>

      <hr class="divider long" />
      <p>Software Engineer, I&#x27;m a man passionate about programming languages, new technologies and open-sources...</p>
      <hr class="divider short" />
      <div class="navigation">
        <div class="profile contact">
          <nav class="navigation left">
  <ul class="links">
    <li class="links item">
      <a href="http://cuongbangoc.github.io/#open" class="link-item" title="CuongBN - Just Do It blog" id="blog-button">Blog</a>
        <a href="../index.html" class="link-item" id="-button">Home</a>
        <a href="../about/index.html" class="link-item" id="-button">About</a>
    </li>
  </ul>
</nav>
          
<nav class="navigation right">
  <ul class="social expanded">

  <!-- Twitter -->
  <!--<li class="social item hvr-grow-rotate">
    <a target="blank" href="http://twitter.com/kikobeats" title="@Kikobeats on Twitter">
      <i class='icon icon-social-twitter'></i>
      <span class="label">Twitter</span>
    </a>
  </li> -->

  <!-- Linkedin -->
  <li class="social item hvr-grow-rotate">
    <a target="blank" href="http://linkedin.com/in/cuongbangoc" title="CuongBaNgoc on LinkedIn">
      <i class='icon icon-social-linkedin'></i>
      <span class="label">Linkedin</span>
    </a>
  </li>

  <!-- Github -->
  <li class="social item hvr-grow-rotate">
    <a target="blank" href="https://github.com/cuongbangoc" title="CuongBaNgoc on Github">
      <i class='icon icon-social-github'></i>
      <span class="label">Github</span>
    </a>
  </li>

  <!-- Facebook -->
    <li class="social item hvr-grow-rotate">
      <a target="blank" href="http://facebook.com/ngoccuongkaka" title="CuongBaNgoc on Facebook">
        <i class='icon icon-social-facebook'></i>
        <span class="label">Facebook</span>
      </a>
    </li>

  <!-- RSS -->
  <li class="social item hvr-grow-rotate">
    <a href="../rss/index.html" title="Subscribe to RSS">
      <i class='icon icon-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  </ul>
</nav>
          <section class="icon icon-search" id="search-container">
  <hr class="divider short" />
  <form id="search-form">
    <input type="text", name="search", placeholder="git, css, javascript,..." id="search-field" />
  </form>
</section>
        </div>
      </div>
    </div>
  </div>
</aside>

  <main>
    <section id="search-results"></section>
    <section class="content">
      

  <article class="post tag-git-2 tag-linux tag-python tag-rabbit">
    <header>
      <div class="post meta">
        <time datetime="05 Aug 2015">05 Aug 2015</time>
        <span class="post tags">in <a href="../tag/git-2/index.html">git</a> <a href="../tag/linux/index.html">Linux</a> <a href="../tag/python/index.html">Python</a> <a href="../tag/rabbit/index.html">rabbit</a></span>


        <span class="post reading-time"> ~ <span></span> read.</span>
      </div>

      <a alt="Tweet 'Install RabbitMQ and Send JSON data With Python on Ubuntu'" href="https://twitter.com/intent/tweet?text=Install%20RabbitMQ%20and%20Send%20JSON%20data%20With%20Python%20on%20Ubuntu %20%C2%BB%20&amp;url=http://cuongbangoc.github.io/install-rabbitmq-and-send-json-data-with-python-on-ubuntu/" >
        <img id="post-image" src=http://res.cloudinary.com/cuongbangoc/image/upload/v1440913221/rabbit-logo_dfefmx.jpg alt="Install RabbitMQ and Send JSON data With Python on Ubuntu">
        <h1 class="icon-reverse icon-social-twitter-post" id="post-title">Install RabbitMQ and Send JSON data With Python on Ubuntu</h1>
      </a>
    </header>

    <div id="post-content" class="post tag-git-2 tag-linux tag-python tag-rabbit">
      <h3 id="introduction">Introduction</h3>

<p>RabbitMQ is one of the more popular message broker solutions, offered with an open-source license (Mozilla Public License v1.1) as an implementation of Advanced Message Queuing Protocol(AMQP). Developed using the Erlang language, it is actually relatively easy to use and get started. It was first published in early 2007.</p>

<p>In this article, I will show you about RabbitMQ, How to install RabbitMQ on Ubuntu 14.04 as Queue Messaging. And after that, I will write demo a simple producer to send json data to RabbitMQ, a simple consumer to receive json data from RabbitMQ.</p>

<h3 id="installingrabbitmq">Installing RabbitMQ</h3>

<p>On Ubuntu 14.04, Install RabbitMQ is very easy. You just typing in terminal:</p>

<p>sudo apt-get update sudo apt-get install <code>rabbitmq-server</code></p>

<h3 id="managingrabbitmq">Managing RabbitMQ</h3>

<p>To enable RabbitMQ Management Console, run the following:</p>

<p>sudo <code>rabbitmq-plugins enable rabbitmq_management</code></p>

<p>Add user to access:</p>

<p>sudo <code>
rabbitmqctl add_user admin admin <br />
sudo rabbitmqctl set_user_tags admin administrator <br />
sudo rabbitmqctl set_permissions -p / admin ".*" ".*" ".*"</code></p>

<p>After that, You can access to manager UI using your web browser:</p>

<p><strong><a href="http://your_ip:15672">http://your_ip:15672</a></strong></p>

<p><a href="http://res.cloudinary.com/cuongbangoc/image/upload/v1440913223/rabbit_login_lvm1p7.png"><img src="http://res.cloudinary.com/cuongbangoc/image/upload/h_153,w_300/v1440913223/rabbit_login_lvm1p7.png" alt="Rabbit_Login" title="" /></a></p>

<p>Enter user and password that is created above to login and you will see:</p>

<p><a href="http://res.cloudinary.com/cuongbangoc/image/upload/v1440913222/rabbit_manager_kmlnhk.png"><img src="http://res.cloudinary.com/cuongbangoc/image/upload/v1440913222/rabbit_manager_kmlnhk.png?w=300" alt="Rabbit_Manager" title="" /></a></p>

<h3 id="writeproducertosendjsondata">Write Producer to send JSON data</h3>

<p>I will write producer by Python and use <em>*pika *</em>to work with RabbitMQ.</p>

<p><strong>The first,</strong> I will create <strong>virtualenv</strong> for my environment.</p>

<p>virtualenv -p /usr/bin/python2.7 env source env/bin/activate pip install pika</p>

<p><strong>Next</strong>, I will need to write config file.</p>

<p>RABBIT<em>HOST= 'localhost' QUEUE</em>TOPIC = 'topic_name'</p>

<p><strong>Next step</strong>, I write producer to send JSON data in *producer.py *file.</p>

<p>import pika import json import config as cfg connection = pika.BlockingConnection(pika.ConnectionParameters(host=cfg.RABBIT<em>HOST)) channel = connection.channel() channel.queue</em>declare(queue=cfg.QUEUE<em>TOPIC) data = {         "id": 1,         "name": "My Name",         "description": "This is description about me"     } message = json.dumps(data) channel.basic</em>publish(exchange='', routing<em>key=cfg.QUEUE</em>TOPIC, body=message) print(" [x] Sent data to RabbitMQ") connection.close()</p>

<p><strong>Next</strong>, I will write consumer to receive and print data in *consumer.py *file.</p>

<p>import pika import json import config as cfg connection = pika.BlockingConnection(pika.ConnectionParameters(host=cfg.RABBIT<em>HOST)) channel = connection.channel() channel.queue</em>declare(queue=cfg.QUEUE<em>TOPIC) print(' [*] Waiting for messages. To exit press CTRL+C') def callback(ch, method, properties, body):     print("Method: {}".format(method))     print("Properties: {}".format(properties))     data = json.loads(body)     print("ID: {}".format(data['id']))     print("Name: {}".format(data['name']))     print('Description: {}'.format(data['description'])) channel.basic</em>consume(callback, queue=cfg.QUEUE<em>TOPIC,no</em>ack=True) channel.start_consuming()</p>

<p><strong>Finally</strong>, I will run it. I run producer and will see:</p>

<p>(env)ngoccuong@server:~/working/source<em>code/rabbit-queue$ python producer.py  [x] Sent data to RabbitMQ (env)ngoccuong@server:~/working/source</em>code/rabbit-queue$</p>

<p><strong>After</strong>, With consumer:</p>

<p>(env)ngoccuong@server:~/working/source_code/rabbit-queue$ python consumer.py  [*] Waiting for messages. To exit press CTRL+C Method: <Basic.Deliver(['consumer_tag=ctag1.a3b15380056c4c55b95f316598ba51a5', 'delivery_tag=1', 'exchange=', 'redelivered=False', 'routing_key=topic_name'])> Properties: <BasicProperties> ID: 1 Name: My Name Description: This is description about me</p>

<p>So, we have completed install RabbitMQ as queue, send and receive JSON data with it. Thank you for reading.</p>

<p>You can see full source code on:</p>

<p><a href="https://github.com/cuongbangoc/rabbit-queue-python">https://github.com/cuongbangoc/rabbit-queue-python</a></p>
    </div>

    <div class="post related">
        <a rel="prev" id="prev-btn" class="btn small square" href="../fix-error-when-installing-scrapy-on-ubuntu-14-04/index.html">← Fix Error When Installing Scrapy on Ubuntu 14.04</a>

        <a rel="next" id="next-btn" class="btn small square" href="../installing-node-js-on-ubuntu-14-04/index.html">Installing Node.js on Ubuntu 14.04 →</a>
    </div>

    <footer class="post comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + window.disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</footer>

  </article>


      <footer>
  <span class="copyright">
   <a href="http://cuongbangoc.github.io" style="font-weight: bold;">CuongBa Blog</a> &copy; 2015. All rights reserved. Built with <a href="https://ghost.org/" target="_blank">Ghost</a> and <a href="https://github.com/Kikobeats/uno-zen" target="_blank">Uno Zen</a> theme.
  </span>
</footer>
    </section>
  </main>

  <script src="../public/jquery.js?v=40fb1f9047"></script>
  <script type="text/javascript" src="../assets/js/run_prettify.js?v=40fb1f9047"></script>
  <script type="text/javascript" src="../assets/js/uno.js?v=40fb1f9047"></script>
  <script>
  if (window.ga_id) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', window.ga_id, 'auto');
    ga('require', 'linkid', 'linkid.js');
    ga('send', 'pageview');
  }
</script>
</body>
</html>
